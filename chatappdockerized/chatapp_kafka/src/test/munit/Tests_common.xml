<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="Tests_common.xml" />
	<munit:test name="TestInputs-test" doc:id="128ccf36-a3ec-4728-8872-ad673c97bcc8" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Current TS" doc:id="218fb21d-7e83-4c77-b097-77b8c19afe30" processor="db:insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="e85747da-4244-46b0-ae06-139c39f6b4f6" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://TestInputstest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Current TS- 20 mins" doc:id="f6468e6f-c444-4e59-9e08-069cc55a2703" processor="db:insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="527b1a0a-9de6-4a95-ac10-ef0c4deee200" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://TestInputstest\mock_payload1.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Payload" doc:id="78874bd6-b322-47a7-afde-171a69dff914" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="db5f2db5-f8fc-474a-b332-a4deb21f53cf" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="53512bbc-0349-43af-9ddd-d51db80c9b75" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import TestInputstest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="8236805e-59c5-4390-a9ce-116c10572411" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import TestInputstest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="8e286ff7-e589-49c0-ac8a-6ec5f67fcc20" >
				<munit:payload value="#[readUrl('classpath://TestInputstest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://TestInputstest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to TestInputs" doc:id="6baaac78-83e6-4772-8ae8-382866a12009" name="TestInputs"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="12235247-11c6-4224-9c75-aa51dd757813" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import TestInputstest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Payload" doc:id="19d10322-19e3-4090-b96a-32235148a4a5" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="db5f2db5-f8fc-474a-b332-a4deb21f53cf" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="InsertData-test" doc:id="33afecbd-c6b5-4eef-b10f-c735bc093698" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Insert into table " doc:id="de7b0afc-52a5-44b3-bb7b-1ecf74e1106f" processor="db:insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="299197c3-9838-4fdb-8ba7-8415236e0ce8" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDatatest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Payload" doc:id="da1bb641-fee9-4255-b3c3-4b57eca1da1c" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="93f553e3-8241-4a10-b7a1-a2cbeba8419b" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="4c2106d8-535a-4cba-b4e4-34470971e06d" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDatatest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="e32ce441-6328-4465-9dc3-1c7d3b3d8ddd" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDatatest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="19109080-7e5e-41fd-851b-bd79e5a3d418" >
				<munit:payload value="#[output application/json --- readUrl('classpath://InsertDatatest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://InsertDatatest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InsertData" doc:id="f03ab6f6-1a47-4110-a566-a3cda44425c9" name="InsertData"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="4db3d332-974d-4694-9623-d5d7d5270ab9" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDatatest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Payload" doc:id="a683045d-230b-40f1-8533-f2da788e5e6b" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="93f553e3-8241-4a10-b7a1-a2cbeba8419b" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="GetAllFromUser-test" doc:id="574cb204-00fc-44f1-b3ec-e5e67291da1c" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Find all messages by a user" doc:id="193b4853-1a6f-480e-a193-9ca6c126a43b" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="19f7f294-29d3-41ab-b045-77435867fa73" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://GetAllFromUsertest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="df4228f5-82af-4d04-ad52-fdea0bffb290" >
				<munit:payload value="#[readUrl('classpath://GetAllFromUsertest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://GetAllFromUsertest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to GetAllFromUser" doc:id="f52af8a5-ceaf-408e-87b3-9205bf22e849" name="GetAllFromUser"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="52197731-2455-4fbb-ac45-49a4dd161651" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import GetAllFromUsertest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify -&gt;JSON" doc:id="df6be6eb-03ad-4aa6-b670-b9f096abf9be" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ae2dd129-b604-4714-b086-a8d97e1f1e2d" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="ReturnRecentMessagesFromUser-test" doc:id="e03e5e4e-29d0-458a-b563-6bf80901d533" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Find all under 15 min messages" doc:id="cfde504a-da87-4dd6-a3ef-af32e7f7cae0" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="20627a4e-b809-420c-8a4b-528c27cc6689" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://ReturnRecentMessagesFromUsertest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="Sender" value="#[output application/java --- readUrl('classpath://ReturnRecentMessagesFromUsertest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Clear out all User Messages" doc:id="a8612168-1c5f-4ff4-900f-0bc66cc60c1c" processor="db:delete">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="978aa0bd-05d0-42ee-9d03-7119e3abe875" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://ReturnRecentMessagesFromUsertest\mock_payload1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="Sender" value="#[output application/java --- readUrl('classpath://ReturnRecentMessagesFromUsertest\mock_variable_1.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="results" value="#[output application/json --- readUrl('classpath://ReturnRecentMessagesFromUsertest\mock_variable_2.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="a5eeab3c-7cb1-41d7-9ecc-ae124b2f74e2" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0a2b9a74-bd2d-4290-8c9e-7a97e60b2f87" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="aff772a1-2fc9-45c3-9d81-8696ce845119" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="102c3655-3ea9-4ba8-ab05-0080ac2ca496" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="eba70bb0-c52c-488b-b47c-aac5e5afcb0e" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_variables
---
spy_assert_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit-tools:spy doc:name="Spy Return Messages" doc:id="cef33b49-ef09-4713-b080-a69fae854f7e" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="67893ab8-4e15-4671-be52-f2bbf4d47aca" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="2e9fd5ec-bd2c-440a-ba57-2c25581e7ef4" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload2
---
spy_assert_payload2::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="3d59ac50-a2ed-4ac5-9b61-c6f9f2e53e08" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload3
---
spy_assert_payload3::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit-tools:spy doc:name="Spy Save returnable messages" doc:id="7d71a45b-e153-4884-a4d4-2b1787f1d4b1" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="9843446b-fa6c-449d-8b99-00e72ae255ea" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="317b31c9-35d3-44c4-8b0d-57534a8f93ee" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload4
---
spy_assert_payload4::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="1ffd0f6d-31c9-49ae-b99c-b4f0f83892a9" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_variables1
---
spy_assert_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="9c9a73a2-41a5-454d-a648-fc6ca9ede206" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_payload5
---
spy_assert_payload5::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="35e156c9-b2f7-485d-946b-0af650e3a30e" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::spy_assert_variables2
---
spy_assert_variables2::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="e80678ca-a206-44ea-9cc6-c4e027f1c0ef" >
				<munit:payload value="#[readUrl('classpath://ReturnRecentMessagesFromUsertest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://ReturnRecentMessagesFromUsertest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to ReturnRecentMessagesFromUser" doc:id="6ee5ac26-0a92-4f1b-bc2f-90198cecf7b2" name="ReturnRecentMessagesFromUser"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="f52af1cb-6ec8-4954-825b-af5089a94a20" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import ReturnRecentMessagesFromUsertest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Convert to Json" doc:id="d08ec9c3-7df4-45bc-ac27-a15671329654" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="e66aa670-27ad-4193-8541-176394850d77" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify -&gt;JSON" doc:id="2daa7dd0-86b9-43ad-b167-1f476c50e34c" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0a689338-1fec-4c11-872c-897d98e53124" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="80d70a5e-38f7-47d1-802e-8dc8463b675d" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0a2b9a74-bd2d-4290-8c9e-7a97e60b2f87" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Return Messages" doc:id="d2d29025-0a21-48f6-a8c1-e1b0302dd6a7" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="67893ab8-4e15-4671-be52-f2bbf4d47aca" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Save returnable messages" doc:id="d161236f-6a55-4001-ac48-d5bc9ca9170e" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="9843446b-fa6c-449d-8b99-00e72ae255ea" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="tempMsgHandlerFlow-test" doc:id="d17ffecb-f616-4450-b543-f722ab4af9b5" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Initialize table temp_messages" doc:id="32453917-0a7c-49f0-b1c1-4091563a1389" processor="db:execute-script">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="38248f6c-d14d-453d-9d70-0041d601b7de" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://tempMsgHandlerFlowtest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Logger" doc:id="7874b25c-a093-462c-9c80-57ed6204e827" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="7c7c70b1-07a7-455d-9a13-e720326cdd3a" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="7b5fbf59-1563-4f03-a49c-b4c749b5b91e" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import tempMsgHandlerFlowtest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="f94ddf22-589d-47d2-bc27-0186cddf2db0" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import tempMsgHandlerFlowtest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="ec62abcc-1f91-47ea-801e-d86d9d5d1a26" >
				<munit:payload value="#[readUrl('classpath://tempMsgHandlerFlowtest\set-event_payload.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to tempMsgHandlerFlow" doc:id="9b6a2aee-8116-4529-8a1d-f9c1b911cb4b" name="tempMsgHandlerFlow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="a7ffe3ea-6f9e-4662-9c60-67ff0479270a" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import tempMsgHandlerFlowtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="1057cce2-5e14-466e-b107-e98e2a4adcee" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="7c7c70b1-07a7-455d-9a13-e720326cdd3a" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="ListofIDs-test" doc:id="23ae34a4-b94b-4ca2-8915-f4663eba2ad7" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Fetch ID" doc:id="43fbfd63-3d31-435a-a4ed-6e363be5f86c" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="57520acf-6eae-4924-adb7-5a4fd829d762" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://ListofIDstest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="bf953995-5f8c-429d-a068-eac9559ac1d4" >
				<munit:payload value="#[readUrl('classpath://ListofIDstest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://ListofIDstest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to ListofIDs" doc:id="25a59fb0-a1d8-4526-aa1d-ce1f514b8138" name="ListofIDs"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="30da41fa-7d2b-43cc-9e98-8c8f23f6b61c" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import ListofIDstest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Transform to List&lt;String&gt;" doc:id="d68330f4-2b1a-4420-882e-861bbdafc1cc" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="fe1e4eb3-b8a3-49be-b229-810ae388227f" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="FindByChatID-test" doc:id="4042aa50-8b13-4041-890d-9df972a14175" >
		<munit:behavior >
			<munit-tools:spy doc:name="Spy Save Chatid" doc:id="a48d5b2f-f0a7-439f-80ed-9c36e56dc634" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="66805642-1d51-46cf-8b49-33afac74ba8e" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="336fd2f3-b982-4c00-8697-dd88ea855f9e" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import FindByChatIDtest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="1d385340-8e89-4b08-bcb9-4b831d2bf554" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import FindByChatIDtest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="5e28b33a-7537-4266-812c-dec8e1eaf924" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import FindByChatIDtest::spy_assert_variables
---
spy_assert_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="a569c160-fe03-43e6-8c53-3595d6a4e21b" >
				<munit:payload value="#[readUrl('classpath://FindByChatIDtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://FindByChatIDtest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to FindByChatID" doc:id="bedd7325-5631-4cd1-9606-0f85c89a1764" name="FindByChatID"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="aa13bc50-73e6-4fee-9e39-a5af514e89db" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import FindByChatIDtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Subflow RetrieveByChat" doc:id="51d899ca-cee9-47e9-acc2-c0a07c076e7c" processor="flow-ref" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="56bf2be2-fb11-4681-ba5a-3aa086e03694" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Save Chatid" doc:id="2ef48324-c3de-4306-b1bf-4593c2ba8986" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="66805642-1d51-46cf-8b49-33afac74ba8e" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="RetrieveByChat-test" doc:id="e5482fbf-91c6-47ec-9376-ded9f1245f66" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Find all media in given chat" doc:id="ab391239-f9c2-4a46-b77a-4ef3c5f2757d" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="670ca77d-0af1-4292-a353-8150d56b3118" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://RetrieveByChattest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="chatid" value="#[output application/java --- readUrl('classpath://RetrieveByChattest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="4cd9b9c9-be26-4e68-8eaf-819c73640180" >
				<munit:payload value="#[readUrl('classpath://RetrieveByChattest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://RetrieveByChattest\set-event_attributes.dwl')]" />
				<munit:variables >
					<munit:variable key="chatid" value="#[output application/java --- readUrl('classpath://RetrieveByChattest\set-event_variable_.dwl')]" encoding="UTF-8" mediaType="application/java" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to RetrieveByChat" doc:id="dc4a24fe-6456-4695-9726-45fc23cf84a6" name="RetrieveByChat"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="77803fdb-dc6a-4198-b9b3-ccc25af365fc" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import RetrieveByChattest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Convert to Json" doc:id="4b519051-a11f-4eb4-9022-a6f79852c052" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="e5954dc5-9766-49bb-b1ce-21e0481e8c82" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="GetFiledetails-test" doc:id="9abadaec-7ca4-408f-9dc6-3b57e16c3e70" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Get File details" doc:id="b4982449-e489-4596-aa89-b76e56470789" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a885af29-d6ba-4e59-980d-2e38f82f0cee" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://GetFiledetailstest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Convert list&lt;media&gt; to media object" doc:id="f79fffdb-93b4-4117-9e6c-95b9f56e7f02" processor="ee:transform">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="8e7a5c0b-32b8-4e26-b898-2f0c33e1d05f" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="91887224-9e37-4fe8-a56e-74f35bcefc73" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import GetFiledetailstest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="8301147c-abba-4e6b-bcc7-4b356ce20e66" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import GetFiledetailstest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="6019e8bc-416a-46c4-ab85-5d284e54564c" >
				<munit:payload value="#[readUrl('classpath://GetFiledetailstest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://GetFiledetailstest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to GetFiledetails" doc:id="89afbbf0-8c2e-4d34-b273-079f030b875a" name="GetFiledetails"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="f77ddbfd-b570-4961-9ba8-828712cfecce" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import GetFiledetailstest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Convert list&lt;media&gt; to media object" doc:id="0820baef-9a0f-43c5-a84c-9a129791519c" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="8e7a5c0b-32b8-4e26-b898-2f0c33e1d05f" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="MediaListener-test" doc:id="b411f071-9df0-4211-86a6-7e20b31ce810" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Insert into table(InsertDataQuery)" doc:id="0ebe349d-ecc9-4a99-8453-4cc8d29ea4fc" processor="flow-ref" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="c62ddeb3-f8e1-4a00-8650-fb57204d9e69" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://MediaListenertest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/java --- readUrl('classpath://MediaListenertest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Convert binary to Application/java" doc:id="9bd94808-2ceb-46ac-b279-51afec5b3725" processor="ee:transform" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3e7097bd-624a-4564-bfc3-9796c0c93e55" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="aacf8c52-139d-40cc-84e3-beb8825f5791" message="The payload does not match" >
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaListenertest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="4a183222-3bf8-4aae-8846-930089abbb65" message="The payload does not match" >
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaListenertest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="c90087db-7114-4e26-911e-17f7e465c0e0" >
				<munit:payload value="#[readUrl('classpath://MediaListenertest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://MediaListenertest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to MediaListener" doc:id="e0ed643d-acd2-47fb-9d1b-601c58cf7086" name="MediaListener" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="6fd68160-072e-4db0-b8af-aa7e54da8378" message="The payload does not match" >
				<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaListenertest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:assert doc:name="Assert variables" doc:id="6edc0aaf-479f-404a-945d-7138734d9e6e" message="The variables do not match" >
				<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaListenertest::assert_expression_variables
---
assert_expression_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Convert binary to Application/java" doc:id="f2aa1595-77fd-4343-9ba4-3bedd78d20bc" processor="ee:transform" times="1" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3e7097bd-624a-4564-bfc3-9796c0c93e55" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="mediahandlerFlow-test" doc:id="c3cfc12d-648b-44b1-af16-e4adc666557d" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Update" doc:id="23872202-2e90-4306-9ed7-ec3c1a2d3678" processor="db:update">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="13aa2936-ff6b-4de9-a701-6b19e9933ed4" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://mediahandlerFlowtest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Transform Message" doc:id="8843eec6-5b96-4377-97bb-56ba375895b1" processor="ee:transform">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="afc50066-76f9-4266-b579-635c2a6b269a" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="bd8438ea-f317-4116-b486-efb40676fee6" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import mediahandlerFlowtest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="2a4b2324-fc82-48fa-b241-2b05f01d37e2" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import mediahandlerFlowtest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="1184b95a-47cc-4e67-b950-8d666f648592" >
				<munit:payload value="#[readUrl('classpath://mediahandlerFlowtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://mediahandlerFlowtest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to mediahandlerFlow" doc:id="dd39546d-7ea5-4cf1-ad22-cea34231b8cc" name="mediahandlerFlow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="42256dd8-330e-4158-875b-daeca47ed524" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import mediahandlerFlowtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="a5aea943-8cb1-442a-8221-1fbd1c730893" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="f3f846d9-1b75-4478-a7ce-3ebe3b87e39d" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Transform Message" doc:id="bd941298-dcd7-4181-9f31-9d2bafbab7f2" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="afc50066-76f9-4266-b579-635c2a6b269a" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="Insertmediadata-test" doc:id="eca0cf64-5304-4646-8c16-a2b357b236e6" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock insert into table Media" doc:id="e9305b31-0442-4966-9b1c-b4eb7042e80e" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="93e5e330-7e04-4fed-96ba-4ac06c8f4498" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://Insertmediadatatest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://Insertmediadatatest\mock_variable_.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="a5c79625-4ca7-4cee-818b-ea10bb28749f" >
				<munit:payload value="#[output application/json --- readUrl('classpath://Insertmediadatatest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://Insertmediadatatest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to Insertdata" doc:id="a0dbe3dc-cf9f-483f-b5aa-bd52c7cc0991" name="Insertdata"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="b3484e54-8d26-4e9f-8e74-9b88b9e427cf" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import Insertmediadatatest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="InsertDataAPI-test" doc:id="1824dfc7-da5f-4aa9-887d-0d4c538051bf" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock DB insert Subflow" doc:id="81374801-c706-4396-acb7-dbf9d77d7469" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="7bdf5ef6-074a-4835-9b53-90b3e5d2aeae" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataAPItest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="cc616af4-5a1b-48e5-8b8c-7921f9ee9787" >
				<munit:payload value="#[output application/json --- readUrl('classpath://InsertDataAPItest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://InsertDataAPItest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InsertDataAPI" doc:id="4ccfbf66-9d54-4f11-9374-783204afebe9" name="InsertDataAPI"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="b089159f-6e7e-4d90-9017-c03b9c62075f" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataAPItest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
		</munit:validation>
	</munit:test>
	<munit:test name="InitializeTable-test" doc:id="6563e58f-54cf-48bd-939b-de0869ee1501" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Initialize table Media" doc:id="1d73166f-961c-4888-8181-c5f167b6f7e5" processor="db:execute-script">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="91af5cfe-3cdc-41cd-820d-e4dc00c4cfb4" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InitializeTabletest\mock_payload1.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Execute script" doc:id="d54761ad-ad95-4882-816f-aa53081ab1cf" processor="db:execute-script">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a868b360-a46a-4de2-a55f-bb50c605e746" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InitializeTabletest\mock_payload2.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="4298efcf-f94d-4094-a04c-e274c37d3934" >
				<munit:payload value="#[readUrl('classpath://InitializeTabletest\set-event_payload1.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InitializeTable" doc:id="46fdcb0c-dc7a-43a5-9b64-f0b32cbc2eae" name="InitializeTable"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="c3add7a3-6d82-4512-8185-365286046766" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InitializeTabletest::assert_expression_payload1
---
assert_expression_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="842cc6ab-a435-4a40-8a66-443316412362" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ae7604ca-20ca-4d9c-a03a-ffbb86e837cc" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="HandleDelayedAcksPeriodically-test" doc:id="9e9bcdf0-2442-4719-8b18-fda3501f4caf" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Select" doc:id="f71f615f-0c6d-4d35-a6be-1dae6e9a0842" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="115159aa-e589-4d54-8028-c5a658cb2de2" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock send ack back to spring " doc:id="f9511f8b-cd9c-4f75-becd-29257572e25e" processor="kafka:publish">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="fea76f5c-9306-4123-89aa-912aebe2fac5" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_payload1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="rootMessage" value="#[readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_.dwl')]" />
						<munit-tools:variable key="currentFile" value="#[output application/java --- readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_1.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="counter" value="#[readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_2.dwl')]" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Delete" doc:id="ad4678b6-ca28-4590-a686-2de99d089031" processor="db:delete">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3ec0450d-477c-4abc-9766-db460580bafb" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_payload2.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="rootMessage" value="#[readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_3.dwl')]" />
						<munit-tools:variable key="currentFile" value="#[output application/java --- readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_4.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="counter" value="#[readUrl('classpath://HandleDelayedAcksPeriodicallytest\mock_variable_5.dwl')]" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="86a297cb-9fa9-4ddc-9733-382bf343f751" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="99e8603c-54c0-41db-b8ad-c3b44de29fad" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="a4aa6623-9bbf-41ba-b73f-540396728f41" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import HandleDelayedAcksPeriodicallytest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="e58c95d7-cca5-41fc-9564-41366c6990e6" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import HandleDelayedAcksPeriodicallytest::spy_assert_variables
---
spy_assert_variables::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="028c969c-7da3-41e8-ac9b-fc7dd4635a49" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import HandleDelayedAcksPeriodicallytest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="e3fbaa6e-bf1f-47b7-a302-e1b706c6d164" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import HandleDelayedAcksPeriodicallytest::spy_assert_variables1
---
spy_assert_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="a34607b5-f624-45aa-b6b4-8671e1a714b9" >
				<munit:payload value="#[readUrl('classpath://HandleDelayedAcksPeriodicallytest\set-event_payload.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to HandleDelayedAcksPeriodically" doc:id="119a7dfd-29fe-4640-a5c1-7bcae4330a9d" name="HandleDelayedAcksPeriodically"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="47739bab-cfb9-4a3c-acbf-b40ed27ba1ba" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import HandleDelayedAcksPeriodicallytest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="5362c43f-f7ab-42fc-b8f3-7c4627fe4f36" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="517cd592-62b3-41ea-83cc-2508a7f0f2c4" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="514796c2-f2ef-46bf-af95-03be39208eed" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="99e8603c-54c0-41db-b8ad-c3b44de29fad" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="InsertDataKafkaMessage-test" doc:id="c9b743b3-c0ba-48bf-bdd5-134f5a25e358" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock DB insert Subflow" doc:id="acf19d29-d093-42f7-8d20-3259543474d2" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ca79959c-dfbf-427a-8c58-1ca5597f9bce" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataKafkaMessagetest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Convert binary to Application/java" doc:id="bd8e4eab-313a-4a35-928d-025d5d4b952d" processor="ee:transform">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a1d7a298-420c-4741-8e28-e667e0c0a852" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="fbef580b-a696-4685-89ae-9e22af6554fd" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataKafkaMessagetest::spy_assert_payload4
---
spy_assert_payload4::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="a39c45b7-f9ce-4f7d-b905-743456d2be9f" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataKafkaMessagetest::spy_assert_payload5
---
spy_assert_payload5::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="17b5e703-7184-4cf4-812e-e8c63a34ae3c" >
				<munit:payload value="#[readUrl('classpath://InsertDataKafkaMessagetest\set-event_payload2.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://InsertDataKafkaMessagetest\set-event_attributes2.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InsertDataKafkaMessage" doc:id="1543d796-8e40-4f6d-b669-e6fc70ba7034" name="InsertDataKafkaMessage"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="8c1ab4f0-3701-4bdf-bd18-e340565819a1" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataKafkaMessagetest::assert_expression_payload1
---
assert_expression_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Convert binary to Application/java" doc:id="5b2730ff-854f-4a9d-a2f3-c6eba78c0dbf" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="a1d7a298-420c-4741-8e28-e667e0c0a852" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="InsertDataQuery-test" doc:id="ca2d42a6-32b8-4c76-8985-89a87f0aa2bb" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Check if duplicate exists" doc:id="a2c521dc-4f2f-43d0-945e-a5768b0f152f" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="61b04d18-bec1-4e00-b370-099cf6e4166d" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataQuerytest\mock_payload4.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://InsertDataQuerytest\mock_variable_4.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Insert file" doc:id="fe30c1bc-841b-4ce4-9080-2e1b21f337af" processor="db:insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="5ec7988e-3509-4838-9f9e-47697272b882" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataQuerytest\mock_payload5.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://InsertDataQuerytest\mock_variable_5.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock send ack back to spring " doc:id="cba05d4a-6fa0-4dc3-a46c-ce49111337a5" processor="kafka:publish">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="001eda20-f56f-4f62-99d9-4d17090fa8de" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataQuerytest\mock_payload6.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://InsertDataQuerytest\mock_variable_6.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="7ec8ac28-467c-4b40-a7c1-e2fefec429b8" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ed4bd68d-ed43-4507-a6c9-150bf7e7bbd4" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="092391a3-f940-4a3d-b7a9-cc1b299601c1" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::spy_assert_payload4
---
spy_assert_payload4::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="d7890dda-b91a-4726-b471-13e3f169f1bf" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::spy_assert_payload5
---
spy_assert_payload5::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="d6fe4a31-a332-4270-a524-f56cb95e45c0" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::spy_assert_variables2
---
spy_assert_variables2::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit-tools:spy doc:name="Spy Set Payload" doc:id="1dd8a2fc-f102-46ae-9031-00467cdf7db6" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="afc5f11f-af03-471b-b5c2-14712ed14267" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="a825ab90-f122-460b-92dc-72302dd93251" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::spy_assert_payload6
---
spy_assert_payload6::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="98a0c817-008a-4602-b9bb-2caff5af378a" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::spy_assert_payload7
---
spy_assert_payload7::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="25be5c16-bb84-4e98-9981-1ef3b1544249" >
				<munit:payload value="#[output application/json --- readUrl('classpath://InsertDataQuerytest\set-event_payload2.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://InsertDataQuerytest\set-event_attributes2.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InsertDataQuery" doc:id="2432937f-9ed9-4d39-8dda-10f64e198923" name="InsertDataQuery"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="e2445224-67e9-44fe-ae89-bc146cd468f6" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQuerytest::assert_expression_payload2
---
assert_expression_payload2::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="a3665416-43a8-43f7-8397-71ce4a2295de" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0bab9b4e-0856-45ac-9da3-dde63ffb2bf1" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="a6b9d243-b27f-49d3-9aaa-e2ca036cdd0c" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ed4bd68d-ed43-4507-a6c9-150bf7e7bbd4" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Payload" doc:id="0fe9e262-311c-4025-b105-a8915209721c" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="afc5f11f-af03-471b-b5c2-14712ed14267" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="InsertDataQuery-duplicate-test" doc:id="104db6ac-6144-4a28-a7ee-4f0ff1d4bdeb" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Check if duplicate exists" doc:id="7e24c5d5-ec5f-41ac-bf53-cf2a30eef535" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="61b04d18-bec1-4e00-b370-099cf6e4166d" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataQueryduplicatetest\mock_payload2.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://InsertDataQueryduplicatetest\mock_variable_2.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Handle duplicate" doc:id="3f64ea98-6703-45a5-aa72-6a00411a42f9" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="b3a73e7d-4012-4518-aa2c-2d161dec5f2c" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://InsertDataQueryduplicatetest\mock_payload3.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://InsertDataQueryduplicatetest\mock_variable_3.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Variable" doc:id="9339751c-41d2-4bc1-93a2-67e9ac2bd887" processor="set-variable">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ed4bd68d-ed43-4507-a6c9-150bf7e7bbd4" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="68d129ad-70c0-42e4-bf46-6b47f55c015d" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQueryduplicatetest::spy_assert_payload2
---
spy_assert_payload2::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="3414a11d-93bb-4ca9-b18a-1551a8a7038d" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQueryduplicatetest::spy_assert_payload3
---
spy_assert_payload3::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
					<munit-tools:assert doc:name="Assert variables" doc:id="e9bf675d-c960-4f71-a392-d4c2d8227604" message="The variables do not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQueryduplicatetest::spy_assert_variables1
---
spy_assert_variables1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="a7171c7b-4e17-43b4-8c04-80c529473738" >
				<munit:payload value="#[output application/json --- readUrl('classpath://InsertDataQueryduplicatetest\set-event_payload1.dwl')]" encoding="UTF-8" mediaType="application/json" />
				<munit:attributes value="#[readUrl('classpath://InsertDataQueryduplicatetest\set-event_attributes1.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to InsertDataQuery" doc:id="66882019-9302-4833-bb6b-9ece2f33befd" name="InsertDataQuery"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="14fbb4d2-5db9-4d17-90e5-ddfd44c414ed" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import InsertDataQueryduplicatetest::assert_expression_payload1
---
assert_expression_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Set Variable" doc:id="77831a5f-b77c-4ba7-9396-29f92705ac91" processor="set-variable" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="ed4bd68d-ed43-4507-a6c9-150bf7e7bbd4" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="MediaDuplicateHandling-trueduplicate-test" doc:id="8a011f54-5b2e-4773-881a-9448722c72ef" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Select" doc:id="3b7fe978-9c3f-4177-9b76-b15817f2cf4c" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="9adc5630-beac-480c-8ca4-8e8d803940d2" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://MediaDuplicateHandlingtrueduplicatetest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://MediaDuplicateHandlingtrueduplicatetest\mock_variable_.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Payload" doc:id="82064194-02d7-4f9b-8ef5-41b13180b091" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3f1df7b2-d0af-42aa-afd0-c87c2a6154ef" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="5061093d-1535-48ae-b3af-71a2ab17ce1e" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingtrueduplicatetest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="d76ccf9c-91e1-436d-987c-9d6cb2c01a99" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingtrueduplicatetest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="7044bd8d-52d9-4f84-9b3a-d5a642a2585f" >
				<munit:payload value="#[output application/java --- readUrl('classpath://MediaDuplicateHandlingtrueduplicatetest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/java" />
				<munit:variables >
					<munit:variable key="NewFile" value="#[output application/json --- readUrl('classpath://MediaDuplicateHandlingtrueduplicatetest\set-event_variable_.dwl')]" encoding="UTF-8" mediaType="application/json" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to MediaDuplicateHandling" doc:id="139e0e52-c4c7-4a15-830a-4ce73476a91f" name="MediaDuplicateHandling"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="2fbe1838-4871-4256-ac65-9db0a9ddc3c7" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingtrueduplicatetest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="4dfc048f-f36c-464d-aae4-f225d5b7418d" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d0a45f54-9410-4056-9347-33388bd60f20" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Payload" doc:id="cfa7ee03-7246-4e92-a081-710ca368631b" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3f1df7b2-d0af-42aa-afd0-c87c2a6154ef" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="MediaDuplicateHandling-falseDuplicate-test" doc:id="2db3a7a4-ef95-491f-9ce7-42c90a4aed56" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock Select" doc:id="c9008ca8-b49e-48fa-b61a-940e5a0c4b02" processor="db:select">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="9adc5630-beac-480c-8ca4-8e8d803940d2" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\mock_payload.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\mock_variable_.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock Send to RetryQ" doc:id="b8e85240-c021-42aa-bbc2-0629ff9ea617" processor="kafka:publish">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="1ec65864-a458-4dd0-a900-6f55e1637d88" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/java --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\mock_payload1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					<munit-tools:variables >
						<munit-tools:variable key="NewFile" value="#[output application/json --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\mock_variable_1.dwl')]" mediaType="application/json" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy Set Payload" doc:id="f485956e-e1b7-4812-9e93-a678135de64c" processor="set-payload">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d6e5ae25-e8a5-4ee5-86b8-fb0cf8612f25" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="8e540a52-9f91-4bf1-86ea-41ce80e42317" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingfalseDuplicatetest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="83e2a2a3-4b30-44bc-b66b-9df5a51a55dd" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingfalseDuplicatetest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="c8914bb9-d1bd-40c6-a88c-8ed3ab62314f" >
				<munit:payload value="#[output application/java --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\set-event_payload.dwl')]" encoding="UTF-8" mediaType="application/java" />
				<munit:variables >
					<munit:variable key="NewFile" value="#[output application/json --- readUrl('classpath://MediaDuplicateHandlingfalseDuplicatetest\set-event_variable_.dwl')]" encoding="UTF-8" mediaType="application/json" />
				</munit:variables>
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to MediaDuplicateHandling" doc:id="53721490-6a3d-4a31-bc5f-6ce3db399495" name="MediaDuplicateHandling"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="7634f70d-0161-4ac3-b059-df2090c652ff" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import MediaDuplicateHandlingfalseDuplicatetest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="98eef4e3-180b-4f47-9e4d-681b15814937" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="e79e2c52-8001-4282-8955-465e8ae31da5" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Set Payload" doc:id="10a645a5-e6b0-4548-878c-f568ea6d0b3e" processor="set-payload" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d6e5ae25-e8a5-4ee5-86b8-fb0cf8612f25" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>


</mule>
